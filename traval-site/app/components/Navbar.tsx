"use client";
import { useState, useEffect } from "react";
import Image from "next/image";
import Link from "next/link";
import { usePathname } from "next/navigation";

export default function Navbar() {
  const pathname = usePathname();
  const [showFixedNav, setShowFixedNav] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      setShowFixedNav(window.scrollY > window.innerHeight);
    };
    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  const NavContent = ({ isFixed = false }) => (
    <nav
      className={`relative z-10 flex w-full items-center justify-between ${isFixed ? "py-2" : "py-6"} mr-10 ml-10`}
    >
      <div className="text-primary flex flex-1 items-center gap-4 sm:gap-6">
        <div className="flex items-center justify-center">
          <Image
            src="/images/john.png"
            alt="john Logo"
            width={isFixed ? 60 : 100}
            height={isFixed ? 60 : 100}
            className={`w-[${isFixed ? "60px" : "80px"}] sm:w-[${isFixed ? "80px" : "100px"}]`}
          />
        </div>

        <div
          className={`hidden gap-4 sm:gap-6 md:flex ${isFixed ? "text-sm" : ""}`}
        >
          <Link
            href="#"
            className={`font-roboto font-bold hover:text-black ${pathname === "#" ? "text-[#002D6A]" : ""}`}
          >
            Travel Packages
          </Link>
          <Link
            href="/"
            className={`font-roboto font-bold hover:text-black ${pathname === "/" ? "text-[#002D6A]" : ""}`}
          >
            Blog Home
          </Link>
          <Link
            href="/categories"
            className={`font-roboto font-bold hover:text-black ${pathname === "/categories" ? "text-[#002D6A]" : ""}`}
          >
            Categories
          </Link>
        </div>
      </div>

      <div className="flex flex-1 justify-center">
        <div className="mx-auto hidden sm:block">
          <Image
            src="/images/logo.png"
            alt="Logo"
            width={isFixed ? 150 : 260}
            height={isFixed ? 160 : 280}
            className={`w-[${isFixed ? "150px" : "180px"}] sm:w-[${isFixed ? "180px" : "220px"}] md:w-[${isFixed ? "200px" : "260px"}]`}
          />
        </div>
      </div>

      <div className="flex flex-1 items-center justify-end gap-4">
        <div className="flex gap-3">
          <svg
            width="240"
            height="48"
            viewBox="0 0 240 48"
            fill="none"
            className="h-auto w-[160px] sm:w-[200px] md:w-[240px]"
          >
            <circle cx="88" cy="24" r="24" fill="#927B64" />
            <path
              d="M96.9543 19.5861C96.9121 18.5765 96.7574 17.8825 96.5358 17.2811C96.3072 16.6427 95.9555 16.0711 95.4947 15.596C95.0445 15.1135 94.4994 14.7386 93.9015 14.5011C93.3283 14.2672 92.6741 14.104 91.7175 14.0594C90.7538 14.0112 90.4478 14 88.0035 14C85.5592 14 85.2532 14.0112 84.2931 14.0557C83.3365 14.1002 82.6788 14.2636 82.1091 14.4973C81.5041 14.7386 80.9625 15.1097 80.5123 15.596C80.0551 16.0711 79.7 16.6465 79.4748 17.2774C79.2532 17.8825 79.0985 18.5728 79.0563 19.5823C79.0106 20.5994 79 20.9223 79 23.5019C79 26.0815 79.0106 26.4044 79.0528 27.4177C79.0949 28.4272 79.2498 29.1213 79.4714 29.7227C79.7 30.3611 80.0551 30.9326 80.5123 31.4078C80.9625 31.8903 81.5076 32.2652 82.1055 32.5027C82.6788 32.7366 83.3329 32.8998 84.2896 32.9443C85.2497 32.989 85.5558 33 88.0001 33C90.4444 33 90.7503 32.989 91.7105 32.9443C92.6671 32.8998 93.3247 32.7366 93.8945 32.5027C95.1044 32.009 96.061 30.9995 96.5288 29.7227C96.7502 29.1177 96.9051 28.4272 96.9472 27.4177C96.9894 26.4044 97 26.0815 97 23.5019C97 20.9223 96.9964 20.5994 96.9543 19.5861ZM95.333 27.3435C95.2943 28.2714 95.1466 28.7725 95.0235 29.1065C94.721 29.9342 94.0985 30.5912 93.3142 30.9104C92.9976 31.0404 92.5194 31.1962 91.6436 31.237C90.694 31.2816 90.4092 31.2926 88.0071 31.2926C85.6049 31.2926 85.3166 31.2816 84.3704 31.237C83.4912 31.1962 83.0164 31.0404 82.6998 30.9104C82.3095 30.7582 81.9543 30.5169 81.6659 30.2015C81.367 29.8934 81.1384 29.5222 80.9941 29.1103C80.871 28.7762 80.7233 28.2714 80.6847 27.3472C80.6424 26.3451 80.632 26.0444 80.632 23.5093C80.632 20.9742 80.6424 20.6698 80.6847 19.6715C80.7233 18.7435 80.871 18.2425 80.9941 17.9084C81.1384 17.4964 81.367 17.1216 81.6695 16.8171C81.9613 16.5016 82.313 16.2604 82.7034 16.1083C83.02 15.9784 83.4983 15.8225 84.374 15.7816C85.3236 15.7371 85.6085 15.7259 88.0105 15.7259C90.4162 15.7259 90.701 15.7371 91.6472 15.7816C92.5264 15.8225 93.0012 15.9784 93.3177 16.1083C93.708 16.2604 94.0633 16.5016 94.3517 16.8171C94.6506 17.1252 94.8792 17.4964 95.0235 17.9084C95.1466 18.2425 95.2943 18.7472 95.333 19.6715C95.3752 20.6736 95.3858 20.9742 95.3858 23.5093C95.3858 26.0444 95.3752 26.3413 95.333 27.3435Z"
              fill="white"
            />
            <path
              d="M88.0025 18.6216C85.4493 18.6216 83.3777 20.8077 83.3777 23.5025C83.3777 26.1972 85.4493 28.3833 88.0025 28.3833C90.5559 28.3833 92.6274 26.1972 92.6274 23.5025C92.6274 20.8077 90.5559 18.6216 88.0025 18.6216ZM88.0025 26.6686C86.3461 26.6686 85.0025 25.2507 85.0025 23.5025C85.0025 21.7542 86.3461 20.3364 88.0025 20.3364C89.6591 20.3364 91.0025 21.7542 91.0025 23.5025C91.0025 25.2507 89.6591 26.6686 88.0025 26.6686Z"
              fill="white"
            />
            <path
              d="M93.8914 18.4281C93.8914 19.0573 93.4079 19.5676 92.8115 19.5676C92.2153 19.5676 91.7318 19.0573 91.7318 18.4281C91.7318 17.7987 92.2153 17.2886 92.8115 17.2886C93.4079 17.2886 93.8914 17.7987 93.8914 18.4281Z"
              fill="white"
            />
            <circle cx="24" cy="24" r="23.5" stroke="#927B64" />
            <path
              d="M25.203 33.4022V25.0087H28.0192L28.4417 21.7366H25.203V19.6479C25.203 18.7009 25.4649 18.0555 26.8245 18.0555L28.5557 18.0547V15.1281C28.2563 15.0892 27.2286 15 26.0325 15C23.5347 15 21.8248 16.5246 21.8248 19.3238V21.7366H19V25.0087H21.8248V33.4022H25.203Z"
              fill="#927B64"
            />
            <circle cx="152" cy="24" r="23.5" stroke="#927B64" />
            <path
              d="M160.995 33L161 32.9992V26.031C161 22.622 160.266 19.9961 156.281 19.9961C154.365 19.9961 153.079 21.0474 152.555 22.0441H152.499V20.3143H148.72V32.9992H152.655V26.7181C152.655 25.0643 152.969 23.4652 155.017 23.4652C157.035 23.4652 157.065 25.3525 157.065 26.8242V33H160.995Z"
              fill="#927B64"
            />
            <path
              d="M142.314 20.3151H146.253V33H142.314V20.3151Z"
              fill="#927B64"
            />
            <path
              d="M144.282 14C143.022 14 142 15.022 142 16.2816C142 17.5411 143.022 18.5845 144.282 18.5845C145.541 18.5845 146.563 17.5411 146.563 16.2816C146.562 15.022 145.54 14 144.282 14Z"
              fill="#927B64"
            />
            <circle cx="216" cy="24" r="23.5" stroke="#927B64" />
            <path
              d="M223.991 18.6701C222.885 18.6701 221.864 18.3037 221.045 17.6856C220.105 16.9771 219.43 15.9377 219.191 14.7397C219.132 14.4437 219.101 14.1383 219.098 13.8253H215.938L215.934 27.1868C215.934 28.451 215.111 29.5229 213.97 29.8999C213.639 30.0093 213.281 30.0612 212.909 30.0407C212.433 30.0146 211.988 29.8712 211.601 29.6395C210.777 29.1467 210.218 28.2527 210.203 27.23C210.179 25.6315 211.471 24.3284 213.068 24.3284C213.384 24.3284 213.687 24.3798 213.97 24.4733V21.2655C213.671 21.2212 213.367 21.1981 213.059 21.1981C211.311 21.1981 209.676 21.9249 208.507 23.2341C207.623 24.2235 207.093 25.4858 207.012 26.8094C206.905 28.5483 207.541 30.2012 208.775 31.4207C208.956 31.5998 209.146 31.7659 209.345 31.9192C210.403 32.7334 211.697 33.1747 213.059 33.1747C213.367 33.1747 213.671 33.152 213.97 33.1077C215.243 32.9192 216.417 32.3367 217.343 31.4207C218.482 30.2955 219.111 28.8015 219.118 27.2114L219.101 20.1501C219.645 20.5691 220.238 20.9158 220.876 21.1849C221.867 21.6031 222.918 21.8151 224 21.8147V18.6694L223.991 18.6701Z"
              fill="#927B64"
            />
          </svg>
        </div>
      </div>
    </nav>
  );

  return (
    <>
      <header className="z-30">
        <div className="relative flex w-full items-center justify-between bg-white px-4 py-6 shadow-sm sm:px-6">
          <div
            className="absolute top-0 left-0 z-20 h-[10px] w-full"
            style={{
              background: "linear-gradient(to right, #002D6A, #C41230)",
            }}
          />
          <NavContent />
        </div>
      </header>

      <div
        className={`fixed top-0 left-0 z-40 w-full bg-white shadow-md transition-transform duration-500 ${showFixedNav ? "translate-y-0" : "-translate-y-full"}`}
      >
        <div className="mr-20 px-6 sm:px-6">
          <NavContent isFixed={true} />
        </div>
      </div>
    </>
  );
}
